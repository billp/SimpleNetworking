<!DOCTYPE html>
<html lang="en">
  <head>
    <title>TermiNetwork  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset="utf-8">
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
    <script src="js/lunr.min.js" defer></script>
    <script src="js/typeahead.jquery.js" defer></script>
    <script src="js/jazzy.search.js" defer></script>
  </head>
  <body>


    <a title="TermiNetwork  Reference"></a>

    <header class="header">
      <p class="header-col header-col--primary">
        <a class="header-link" href="index.html">
          TermiNetwork 1.0.0 Docs
        </a>
         (92% documented)
      </p>
    
      <p class="header-col--secondary">
        <form role="search" action="search.json">
          <input type="text" placeholder="Search documentation" data-typeahead>
        </form>
      </p>
    
    
    </header>

    <p class="breadcrumbs">
      <a class="breadcrumb" href="index.html">TermiNetwork Reference</a>
      <img class="carat" src="img/carat.png" />
      TermiNetwork  Reference
    </p>

    <div class="content-wrapper">
      <nav class="navigation">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNCache.html">TNCache</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNConfiguration.html">TNConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNEnvironment.html">TNEnvironment</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNOperation.html">TNOperation</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNQueue.html">TNQueue</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNRequest.html">TNRequest</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNRouteConfiguration.html">TNRouteConfiguration</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNRouter.html">TNRouter</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Classes/TNTransformer.html">TNTransformer</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNError.html">TNError</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNMethod.html">TNMethod</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNMultipartFormDataPartType.html">TNMultipartFormDataPartType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNPath.html">TNPath</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNQueueFailureMode.html">TNQueueFailureMode</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNRequestBodyType.html">TNRequestBodyType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Enums/TNURLScheme.html">TNURLScheme</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Extensions.html">Extensions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Data.html">Data</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Extensions/Decodable.html">Decodable</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TNEnvironmentProtocol.html">TNEnvironmentProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TNErrorHandlerProtocol.html">TNErrorHandlerProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TNRequestMiddlewareProtocol.html">TNRequestMiddlewareProtocol</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Protocols/TNRouteProtocol.html">TNRouteProtocol</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Structs.html">Structures</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Structs/TNImage.html">TNImage</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a class="nav-group-name-link" href="Typealiases.html">Type Aliases</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork25ImageOnFinishCallbackTypea">ImageOnFinishCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork19ImagePreprocessTypea">ImagePreprocessType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork30TNAfterAllRequestsCallbackTypea">TNAfterAllRequestsCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork30TNAfterEachRequestCallbackTypea">TNAfterEachRequestCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork31TNBeforeEachRequestCallbackTypea">TNBeforeEachRequestCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork30TNBeforeQueueStartCallbackTypea">TNBeforeQueueStartCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork25TNDownloadSuccessCallbacka">TNDownloadSuccessCallback</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork17TNFailureCallbacka">TNFailureCallback</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/TNImageType">TNImageType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork11TNImageTypea">TNImageType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork15TNMockDelayTypea">TNMockDelayType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork22TNProgressCallbackTypea">TNProgressCallbackType</a>
              </li>
              <li class="nav-group-task">
                <a class="nav-group-task-link" href="Typealiases.html#/s:12TermiNetwork17TNSuccessCallbacka">TNSuccessCallback</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">

        <section class="section">
          <div class="section-content top-matter">
            
            <p></p>

<p align="center">
  <img src="https://raw.githubusercontent.com/billp/TermiNetwork/master/TermiNetworkLogo.svg" alt="" data-canonical-src="" width="80%" />
</p>

<p align="center"><b>A zero-dependency networking solution for building modern and secure iOS applications.</b>
  <br /><br />
    <img src="https://travis-ci.org/billp/TermiNetwork.svg?branch=1.0.0-new-structure" />
  <img src="https://img.shields.io/cocoapods/v/TermiNetwork.svg?style=flat" />
  <img src="https://img.shields.io/badge/Language-Swift 5.3-blue" />
  <img src="https://img.shields.io/github/license/billp/TermiNetwork" />
  <img src="https://img.shields.io/cocoapods/p/TermiNetwork" />
  <img src="https://img.shields.io/cocoapods/metrics/doc-percent/TermiNetwork" />
</p>
<h2 id='features' class='heading'>Features</h2>

<p align="center">
Model deserialization with <b>Codables</b> ðŸ”¸ Multi-Environment configuration ðŸ”¸ Convert responses to the given type (<b>Codable</b>, <b>UIImage</b>, <b>Data</b> or <b>String</b>) ðŸ”¸ <b>UIKit</b>/<b>SwiftUI</b> helpers for downloading remote images ðŸ”¸ Request fragmentation with Routers (perfect for modular environments) ðŸ”¸ Transformers (convert rest models to domain models) ðŸ”¸ Error handling ðŸ”¸ Mock requests ðŸ”¸ Certificate pinning ðŸ”¸ Flexible configuration ðŸ”¸ Middlewares ðŸ”¸ File/Data Upload/Download ðŸ”¸ Pretty printed debug information in console
</p>
<h4 id='table-of-contents' class='heading'>Table of contents</h4>

<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#demo_app">Demo Application</a></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#simple_usage">Simple usage of <b>TNRequest</b></a></li>
<li><a href="#advanced_usage">Advanced usage of <b>TNRequest</b> with <b>Configuration</b> and custom <b>Queue</b></a></li>
<li><a href="#complete_setup">Complete project setup with <b>Environments</b> and <b>Routers</b> (Recommended)</a>

<ul>
<li><a href="#setup_environments">Setup your Environment</a></li>
<li><a href="#setup_routers">Setup your Routes</a></li>
<li><a href="#construct_request">Make a request</a></li>
</ul></li>
</ul></li>
<li><a href="#queue_hooks">Queue Hooks</a></li>
<li><a href="#error_handling">Error Handling</a></li>
<li><a href="#debug_logging">Debug Logging</a></li>
</ul>

<p><a name="installation"></a></p>
<h2 id='installation' class='heading'>Installation</h2>

<p>You can install <strong>TermiNetwork</strong> with one of the following ways&hellip;</p>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p>Add the following line to your <strong>Podfile</strong> and run <strong>pod install</strong> in your terminal:</p>
<pre class="highlight ruby"><code><span class="n">pod</span> <span class="s1">'TermiNetwork'</span><span class="p">,</span> <span class="s1">'~&gt; 1.0.0'</span>
</code></pre>
<h3 id='carthage' class='heading'>Carthage</h3>

<p>Add the following line to your <strong>Carthage</strong> and run <strong>carthage update</strong> in your terminal:</p>
<pre class="highlight ruby"><code><span class="n">github</span> <span class="s2">"billp/TermiNetwork"</span> <span class="o">~&gt;</span> <span class="mf">1.0</span><span class="o">.</span><span class="mi">0</span>
</code></pre>
<h3 id='swift-package-manager' class='heading'>Swift Package Manager</h3>

<p>Go to <strong>File</strong> &gt; <strong>Swift Packages</strong> &gt; <strong>Add Package Dependency</strong> and add the following URL :</p>
<pre class="highlight plaintext"><code>https://github.com/billp/TermiNetwork
</code></pre>

<p><a name="demo_app"></a></p>
<h2 id='demo-application' class='heading'>Demo Application</h2>

<p>To see all the features of TermiNetwork in action, download the source code and run the <strong>TermiNetworkExamples</strong> scheme.</p>

<p><a name="usage"></a></p>
<h2 id='usage' class='heading'>Usage</h2>

<p><a name="simple_usage"></a></p>
<h3 id='simple-usage-tnrequest' class='heading'>Simple usage (TNRequest)</h3>

<p>Let&rsquo;s say you have the following Codable model:</p>
<pre class="highlight swift"><code><span class="kd">struct</span> <span class="kt">Todo</span><span class="p">:</span> <span class="kt">Codable</span> <span class="p">{</span>
   <span class="k">let</span> <span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span>
   <span class="k">let</span> <span class="nv">title</span><span class="p">:</span> <span class="kt">String</span>
<span class="p">}</span>
</code></pre>

<p>To construct a request which adds a new todo using a REST API, do the following:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">"title"</span><span class="p">:</span> <span class="s">"Go shopping."</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">"x-auth"</span><span class="p">:</span> <span class="s">"abcdef1234"</span><span class="p">]</span>

<span class="kt">TNRequest</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="n">post</span><span class="p">,</span>
          <span class="nv">url</span><span class="p">:</span> <span class="s">"https://myweb.com/api/todos"</span><span class="p">,</span>
          <span class="nv">headers</span><span class="p">:</span> <span class="n">headers</span><span class="p">,</span>
          <span class="nv">params</span><span class="p">:</span> <span class="n">params</span><span class="p">)</span><span class="o">.</span><span class="nf">start</span><span class="p">(</span><span class="nv">responseType</span><span class="p">:</span> <span class="kt">Todo</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
                                <span class="nv">onSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">todo</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">todo</span><span class="p">)</span>
<span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>
<h4 id='parameters-explanation' class='heading'>Parameters Explanation</h4>
<h5 id='method' class='heading'>method</h5>

<p>One of the following supported HTTP methods:</p>
<pre class="highlight plaintext"><code>.get, .head, .post, .put, .delete, .connect, .options, .trace or .patch
</code></pre>
<h5 id='responsetype' class='heading'>responseType</h5>

<p>One of the following supported response types</p>
<pre class="highlight plaintext"><code>JSON.self, Codable.self (subclasses), UIImage.self, Data.self or String.self
</code></pre>
<h5 id='onsuccess' class='heading'>onSuccess</h5>

<p>A callback that returns an object of the given type (specified in responseType parameter).</p>
<h5 id='onfailure' class='heading'>onFailure</h5>

<p>a callback that returns a <strong>TNError</strong> and optionally the response <strong>Data</strong>.</p>

<p><a name="advanced_usage"></a></p>
<h3 id='advanced-usage-of-tnrequest-with-configuration-and-custom-queue' class='heading'>Advanced usage of TNRequest with Configuration and custom Queue</h3>

<p>The following example uses a custom queue that specifies the <strong>maxConcurrentOperationCount</strong> (how many requests run in parallel) and a configuration object. To see the full list of available configuration properties, take a look at <a href="https://billp.github.io/TermiNetwork/Classes/TNConfiguration.html#/Public%20properties" target="_blank">TNConfiguration properties</a> in documentation.</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">TNConfiguration</span><span class="p">(</span>
    <span class="nv">cachePolicy</span><span class="p">:</span> <span class="o">.</span><span class="n">useProtocolCachePolicy</span><span class="p">,</span>
    <span class="nv">timeoutInterval</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
    <span class="nv">requestBodyType</span><span class="p">:</span> <span class="o">.</span><span class="kt">JSON</span>
<span class="p">)</span>

<span class="k">let</span> <span class="nv">params</span> <span class="o">=</span> <span class="p">[</span><span class="s">"title"</span><span class="p">:</span> <span class="s">"Go shopping."</span><span class="p">]</span>
<span class="k">let</span> <span class="nv">headers</span> <span class="o">=</span> <span class="p">[</span><span class="s">"x-auth"</span><span class="p">:</span> <span class="s">"abcdef1234"</span><span class="p">]</span>

<span class="kt">TNRequest</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="n">post</span><span class="p">,</span>
          <span class="nv">url</span><span class="p">:</span> <span class="s">"https://myweb.com/todos"</span><span class="p">,</span>
          <span class="nv">headers</span><span class="p">:</span> <span class="n">headers</span><span class="p">,</span>
          <span class="nv">params</span><span class="p">:</span> <span class="n">params</span><span class="p">,</span>
          <span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span><span class="o">.</span><span class="nf">start</span><span class="p">(</span><span class="nv">queue</span><span class="p">:</span> <span class="n">myQueue</span><span class="p">,</span>
                                              <span class="nv">responseType</span><span class="p">:</span> <span class="kt">String</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
                                              <span class="nv">onSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">response</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="k">in</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<p>The request above uses a custom queue <em>myQueue</em> with a failure mode of value <em>.continue</em> (default), which means that the queue continues its execution if a request fails.</p>

<p><a name="complete_setup"></a></p>
<h2 id='complete-setup-with-b-environments-b-and-b-routers-b' class='heading'>Complete setup with <b>Environments</b> and <b>Routers</b></h2>

<p>The complete and recommended usage of TermiNetwork library consists of creating your environments and define your own routers.  </p>

<p><a name="setup_environments"></a></p>
<h4 id='setup-your-environment' class='heading'>Setup your Environment</h4>

<p>Create a swift class that implements the <strong>TNEnvironmentProtocol</strong> and define your environments. See bellow for an example:</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">Environment</span><span class="p">:</span> <span class="kt">TNEnvironmentProtocol</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">localhost</span>
    <span class="k">case</span> <span class="n">dev</span>
    <span class="k">case</span> <span class="n">production</span>

    <span class="kd">func</span> <span class="nf">configure</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">TNEnvironment</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">requestConfiguration</span> <span class="o">=</span> <span class="kt">TNConfiguration</span><span class="p">(</span><span class="nv">cachePolicy</span><span class="p">:</span> <span class="o">.</span><span class="n">useProtocolCachePolicy</span><span class="p">,</span>
                                                   <span class="nv">timeoutInterval</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
                                                   <span class="nv">requestBodyType</span><span class="p">:</span> <span class="o">.</span><span class="kt">JSON</span><span class="p">)</span>
        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">localhost</span><span class="p">:</span>
            <span class="k">return</span> <span class="kt">TNEnvironment</span><span class="p">(</span><span class="nv">scheme</span><span class="p">:</span> <span class="o">.</span><span class="n">https</span><span class="p">,</span>
                                 <span class="nv">host</span><span class="p">:</span> <span class="s">"localhost"</span><span class="p">,</span>
                                 <span class="nv">port</span><span class="p">:</span> <span class="mi">8080</span><span class="p">,</span>
                                 <span class="nv">configuration</span><span class="p">:</span> <span class="n">requestConfiguration</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">dev</span><span class="p">:</span>
            <span class="k">return</span> <span class="kt">TNEnvironment</span><span class="p">(</span><span class="nv">scheme</span><span class="p">:</span> <span class="o">.</span><span class="n">https</span><span class="p">,</span>
                                 <span class="nv">host</span><span class="p">:</span> <span class="s">"mydevserver.com"</span><span class="p">,</span>
                                 <span class="nv">suffix</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"v1"</span><span class="p">]),</span>
                                 <span class="nv">configuration</span><span class="p">:</span> <span class="n">requestConfiguration</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">production</span><span class="p">:</span>
            <span class="k">return</span> <span class="kt">TNEnvironment</span><span class="p">(</span><span class="nv">scheme</span><span class="p">:</span> <span class="o">.</span><span class="n">http</span><span class="p">,</span>
                                 <span class="nv">host</span><span class="p">:</span> <span class="s">"myprodserver.com"</span><span class="p">,</span>
                                 <span class="nv">suffix</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"v1"</span><span class="p">]),</span>
                                 <span class="nv">configuration</span><span class="p">:</span> <span class="n">requestConfiguration</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p><em>Optionally you can  pass a **configuration</em>* object to make all requests inherit the given configuration settings.*</p>

<p><a name="setup_routers"></a></p>
<h4 id='setup-your-routes' class='heading'>Setup your Routes</h4>

<p>The following code creates a TodosRoute enumeration with all the required routes in order to create the requests later.</p>
<pre class="highlight swift"><code><span class="kd">enum</span> <span class="kt">TodosRoute</span><span class="p">:</span> <span class="kt">TNRouteProtocol</span> <span class="p">{</span>
    <span class="c1">// Define your routes</span>
    <span class="k">case</span> <span class="n">list</span>
    <span class="k">case</span> <span class="nf">show</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">add</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="kt">String</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">remove</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">)</span>
    <span class="k">case</span> <span class="nf">setCompleted</span><span class="p">(</span><span class="nv">id</span><span class="p">:</span> <span class="kt">Int</span><span class="p">,</span> <span class="nv">completed</span><span class="p">:</span> <span class="kt">Bool</span><span class="p">)</span>

    <span class="c1">// Set method, path, params, headers for each route</span>
    <span class="kd">func</span> <span class="nf">configure</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">TNRouteConfiguration</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">TNConfiguration</span><span class="p">(</span><span class="nv">requestBodyType</span><span class="p">:</span> <span class="o">.</span><span class="kt">JSON</span><span class="p">,</span>
                                            <span class="nv">headers</span><span class="p">:</span> <span class="p">[</span><span class="s">"x-auth"</span><span class="p">:</span> <span class="s">"abcdef1234"</span><span class="p">])</span>

        <span class="k">switch</span> <span class="k">self</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="nv">list</span><span class="p">:</span>
            <span class="k">return</span> <span class="kt">TNRouteConfiguration</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="k">get</span><span class="p">,</span>
                                        <span class="nv">path</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"todos"</span><span class="p">]),</span> <span class="c1">// GET /todos</span>
                                        <span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="nf">show</span><span class="p">(</span><span class="k">let</span> <span class="nv">id</span><span class="p">):</span>
            <span class="k">return</span> <span class="kt">TNRouteConfiguration</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="k">get</span><span class="p">,</span>
                                        <span class="nv">path</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"todo"</span><span class="p">,</span> <span class="kt">String</span><span class="p">(</span><span class="n">id</span><span class="p">)]),</span> <span class="c1">// GET /todos/[id]</span>
                                        <span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span> 
        <span class="k">case</span> <span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="k">let</span> <span class="nv">title</span><span class="p">):</span>
            <span class="k">return</span> <span class="kt">TNRouteConfiguration</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="n">post</span><span class="p">,</span>
                                        <span class="nv">path</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"todos"</span><span class="p">]),</span> <span class="c1">// POST /todos</span>
                                        <span class="nv">params</span><span class="p">:</span> <span class="p">[</span><span class="s">"title"</span><span class="p">:</span> <span class="n">title</span><span class="p">],</span>
                                        <span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span> 
        <span class="k">case</span> <span class="o">.</span><span class="nf">remove</span><span class="p">(</span><span class="k">let</span> <span class="nv">id</span><span class="p">):</span>
            <span class="k">return</span> <span class="kt">TNRouteConfiguration</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="n">delete</span><span class="p">,</span>
                                        <span class="nv">path</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"todo"</span><span class="p">,</span> <span class="kt">String</span><span class="p">(</span><span class="n">id</span><span class="p">)]),</span> <span class="c1">// DELETE /todo/[id]</span>
                                        <span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span> 
        <span class="k">case</span> <span class="o">.</span><span class="nf">setCompleted</span><span class="p">(</span><span class="k">let</span> <span class="nv">id</span><span class="p">,</span> <span class="k">let</span> <span class="nv">completed</span><span class="p">):</span>
            <span class="k">return</span> <span class="kt">TNRouteConfiguration</span><span class="p">(</span><span class="nv">method</span><span class="p">:</span> <span class="o">.</span><span class="n">patch</span><span class="p">,</span>
                                        <span class="nv">path</span><span class="p">:</span> <span class="o">.</span><span class="nf">path</span><span class="p">([</span><span class="s">"todo"</span><span class="p">,</span> <span class="kt">String</span><span class="p">(</span><span class="n">id</span><span class="p">)]),</span> <span class="c1">// PATCH /todo/[id]</span>
                                        <span class="nv">params</span><span class="p">:</span> <span class="p">[</span><span class="s">"completed"</span><span class="p">:</span> <span class="n">completed</span><span class="p">],</span>
                                        <span class="nv">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span> 
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>You can optionally pass a <strong>configuration</strong> object to specify settings for each route. </p>

<p><a name="construct_request"></a></p>
<h4 id='make-a-request' class='heading'>Make a request</h4>

<p>Use <strong>TNRouter</strong> instance by specializing it with <strong>TodosRoute</strong> to create and execute the request:</p>
<pre class="highlight swift"><code><span class="kt">TNRouter</span><span class="o">&lt;</span><span class="kt">TodosRoute</span><span class="o">&gt;</span><span class="p">()</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"Go shopping!"</span><span class="p">))</span>
    <span class="o">.</span><span class="nf">start</span><span class="p">(</span><span class="nv">responseType</span><span class="p">:</span> <span class="kt">Todo</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
           <span class="nv">onSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">todo</span> <span class="k">in</span>
    <span class="c1">// do something with todo</span>
<span class="p">})</span> <span class="p">{</span> <span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="k">in</span>
    <span class="c1">// show error</span>
<span class="p">}</span>
</code></pre>

<p><a name="queue_hooks"></a></p>
<h2 id='queue-hooks' class='heading'>Queue Hooks</h2>

<p>You can define closures that  run before and/or after a request execution in a queue. The following hooks are available:</p>
<pre class="highlight swift"><code><span class="kt">TNQueue</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">beforeAllRequestsCallback</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// e.g. show progress loader</span>
<span class="p">}</span>

<span class="kt">TNQueue</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">afterAllRequestsCallback</span> <span class="o">=</span> <span class="p">{</span> <span class="n">completedWithError</span> <span class="k">in</span>
    <span class="c1">// e.g. hide progress loader</span>
<span class="p">}</span>

<span class="kt">TNQueue</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">beforeEachRequestCallback</span> <span class="o">=</span> <span class="p">{</span> <span class="n">request</span> <span class="k">in</span>
    <span class="c1">// do something with request</span>
<span class="p">}</span>

<span class="kt">TNQueue</span><span class="o">.</span><span class="n">shared</span><span class="o">.</span><span class="n">afterEachRequestCallback</span> <span class="o">=</span> <span class="p">{</span> <span class="n">request</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">urlResponse</span><span class="p">,</span> <span class="n">error</span> 
    <span class="c1">// do something with request, data, urlResponse, error</span>
<span class="p">}</span>
</code></pre>

<p>For more information take a look at <a href="https://billp.github.io/TermiNetwork/Classes/TNQueue.html" target="_blank">TNQueue</a> in documentation.</p>

<p><a name="error_handling"></a></p>
<h2 id='error-handling' class='heading'>Error Handling</h2>

<p>TermiNetwork provides its own error types (TNError) for all the possible cases. Those errors are typically returned by onFailure callbacks in requests. </p>

<p>You can use the <strong>localizedDescription</strong> property to get a localized error message.</p>

<p>To see all the available cases, please visit at <a href="https://billp.github.io/TermiNetwork/Enums/TNError.html" target="_blank">TNError</a> in documentation.</p>
<h4 id='example' class='heading'>Example</h4>
<pre class="highlight swift"><code><span class="kt">TNRouter</span><span class="o">&lt;</span><span class="kt">TodosRoute</span><span class="o">&gt;</span><span class="p">()</span><span class="o">.</span><span class="nf">request</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="nv">title</span><span class="p">:</span> <span class="s">"Go shopping!"</span><span class="p">))</span>
            <span class="o">.</span><span class="nf">start</span><span class="p">(</span><span class="nv">responseType</span><span class="p">:</span> <span class="kt">Todo</span><span class="o">.</span><span class="k">self</span><span class="p">,</span>
   <span class="nv">onSuccess</span><span class="p">:</span> <span class="p">{</span> <span class="n">todo</span> <span class="k">in</span>
    <span class="c1">// do something with todo</span>
   <span class="p">},</span>
   <span class="nv">onFailure</span><span class="p">:</span> <span class="p">{</span> <span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">switch</span> <span class="n">error</span> <span class="p">{</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">notSuccess</span><span class="p">(</span><span class="k">let</span> <span class="nv">statusCode</span><span class="p">):</span>
        <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"Status code "</span> <span class="o">+</span> <span class="kt">String</span><span class="p">(</span><span class="n">statusCode</span><span class="p">))</span>
        <span class="k">break</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">networkError</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"Network error: "</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">case</span> <span class="o">.</span><span class="nf">cancelled</span><span class="p">(</span><span class="k">let</span> <span class="nv">error</span><span class="p">):</span>
        <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"Request cancelled with error: "</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">default</span><span class="p">:</span>
        <span class="nf">debugPrint</span><span class="p">(</span><span class="s">"Error: "</span> <span class="o">+</span> <span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre>
<h2 id='uiimageview-extension' class='heading'>UIImageView Extension</h2>

<p>You can use the <em>setRemoteImage</em> method of UIImageView to download an image from a remote server</p>

<p>Example:</p>
<pre class="highlight swift"><code><span class="n">imageView</span><span class="o">.</span><span class="nf">setRemoteImage</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="s">"http://www.website.com/image.jpg"</span><span class="p">,</span> <span class="n">defaultImage</span><span class="p">:</span> <span class="kt">UIImage</span><span class="p">(</span><span class="nv">named</span><span class="p">:</span> <span class="s">"DefaultImage"</span><span class="p">),</span> <span class="nv">beforeStart</span><span class="p">:</span> <span class="p">{</span>
    <span class="n">imageView</span><span class="o">.</span><span class="n">activityIndicator</span><span class="o">.</span><span class="nf">startAnimating</span><span class="p">()</span>
<span class="p">},</span> <span class="nv">preprocessImage</span><span class="p">:</span> <span class="p">{</span> <span class="n">image</span> <span class="k">in</span> <span class="c1">// This block will run in background</span>
    <span class="k">let</span> <span class="nv">newImage</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="nf">resize</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">newImage</span>
<span class="p">})</span> <span class="p">{</span> <span class="n">image</span><span class="p">,</span> <span class="n">error</span> <span class="k">in</span>
    <span class="n">imageView</span><span class="o">.</span><span class="n">activityIndicator</span><span class="o">.</span><span class="nf">stopAnimating</span><span class="p">()</span>
<span class="p">}</span>
</code></pre>

<p><a name="debug_logging"></a></p>
<h2 id='debug-logging' class='heading'>Debug Logging</h2>

<p>You enable the debug logging by setting the <strong>verbose</strong> to <strong>true</strong> in your configuration</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">configuration</span> <span class="o">=</span> <span class="kt">TNConfiguration</span><span class="p">()</span>
<span class="n">configuration</span><span class="o">.</span><span class="n">verbose</span> <span class="o">=</span> <span class="kc">true</span>
</code></pre>

<p>And you will see a beautiful pretty-printed debug output in your console.
<img width="750px" src="https://user-images.githubusercontent.com/1566052/102597522-75be5200-4123-11eb-9e6e-5740e42a20a5.png"></p>
<h2 id='tests' class='heading'>Tests</h2>

<p>To run the tests open the Sample project, select Product -&gt; Test or simply press âŒ˜U on keyboard.</p>
<h2 id='contributors' class='heading'>Contributors</h2>

<p>Alex Athanasiadis, <a href="mailto:alexanderathan@gmail.com">alexanderathan@gmail.com</a></p>
<h2 id='license' class='heading'>License</h2>

<p>TermiNetwork is available under the MIT license. See the LICENSE file for more info.</p>

          </div>
        </section>


      </article>
    </div>
    <section class="footer">
      <p>&copy; 2020 <a class="link" href="https://github.com/billp/TermiNetwork.git" target="_blank" rel="external">Bill Panagiotopoulos</a>. All rights reserved. (Last updated: 2020-12-22)</p>
      <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy â™ªâ™« v0.13.6</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
    </section>
  </body>
</div>
</html>
